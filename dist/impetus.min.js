!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function e(n){function r(){T.call(M,N,O)}function a(){F.call(M,N,O)}function d(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function s(e){var n=d(e);Z||$||(Z=!0,_=!1,H=n.id,k=j=n.x,z=G=n.y,ee=[],l(k,z),document.addEventListener("touchmove",f),document.addEventListener("touchend",m),document.addEventListener("touchcancel",v),document.addEventListener("mousemove",f),document.addEventListener("mouseup",m))}function f(e){e.preventDefault();var n=d(e);Z&&n.id===H&&(j=n.x,G=n.y,l(k,z),y())}function m(e){var n=d(e);Z&&n.id===H&&v()}function v(){Z=!1,l(k,z),E(),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",m),document.removeEventListener("touchcancel",v),document.removeEventListener("mouseup",m),document.removeEventListener("mousemove",f)}function l(e,n){for(var t=Date.now();ee.length>0&&!(t-ee[0].time<=100);)ee.shift();ee.push({x:e,y:n,time:t})}function h(){var e=j-k,n=G-z;if(N+=e*q,O+=n*q,Y){var t=w();0!==t.x&&(N-=e*p(t.x)*q),0!==t.y&&(O-=n*p(t.y)*q)}else w(!0);r(),k=j,z=G,W=!1}function p(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function y(){W||c(h),W=!0}function x(e,n){e&&(P=e[0],R=e[1]),n&&(U=n[0],V=n[1])}function w(e){var n=0,t=0;return void 0!==P&&N<P?n=P-N:void 0!==R&&N>R&&(n=R-N),void 0!==U&&O<U?t=U-O:void 0!==V&&O>V&&(t=V-O),e&&(0!==n&&(N=n>0?P:R),0!==t&&(O=t>0?U:V)),{x:n,y:t,inBounds:0===n&&0===t}}function E(){var e=ee[0],n=ee[ee.length-1],t=n.x-e.x,o=n.y-e.y,i=n.time-e.time,u=i/15/q;J=t/u||0,K=o/u||0;var r=w();Math.abs(J)>1||Math.abs(K)>1||!r.inBounds?(_=!0,c(L)):a()}function L(){if(_){J*=C,K*=C,N+=J,O+=K;var e=w();if(Math.abs(J)>Q||Math.abs(K)>Q||!e.inBounds){if(Y){var n=2.5;if(0!==e.x)if(e.x*J<=0)J+=e.x*i;else{var t=e.x>0?n:-n;J=(e.x+t)*u}if(0!==e.y)if(e.y*K<=0)K+=e.y*i;else{var t=e.y>0?n:-n;K=(e.y+t)*u}}else 0!==e.x&&(N=e.x>0?P:R,J=0),0!==e.y&&(O=e.y>0?U:V,K=0);r(),ne=c(L)}else _=!1,a()}}var b=n.source,M=void 0===b?document:b,T=n.update,g=n.onFinish,F=void 0===g?function(){}:g,A=n.multiplier,q=void 0===A?1:A,B=n.friction,C=void 0===B?.92:B,D=n.initialValues,I=n.boundX,S=n.boundY,X=n.bounce,Y=void 0===X||X;t(this,e);var P,R,U,V,k,z,j,G,H,J,K,N=0,O=0,Q=o*q,W=!1,Z=!1,$=!1,_=!1,ee=[],ne=null;!function(){if(M="string"==typeof M?document.querySelector(M):M,!M)throw new Error("IMPETUS: source not found.");if(!T)throw new Error("IMPETUS: update function not defined.");D&&(D[0]&&(N=D[0]),D[1]&&(O=D[1]),r()),x(I,S),M.addEventListener("touchstart",s),M.addEventListener("mousedown",s)}(),this.pause=function(){Z=!1,$=!0},this.resume=function(){$=!1},this.setValues=function(e,n){"number"==typeof e&&(N=e),"number"==typeof n&&(O=n)},this.setBounds=function(e,n){x(e,n)},this.setMultiplier=function(e){q=e,Q=o*q}};n.exports=r;for(var c=window.requestAnimationFrame,a=window.cancelAnimationFrame,d=["webkit","moz"],s=0,f=0;f<d.length&&!c;++f)c=window[d[f]+"RequestAnimationFrame"],a=window[d[f]+"CancelAnimationFrame"]||window[d[f]+"CancelRequestAnimationFrame"];c||(c=function(e,n){var t=(new Date).getTime(),o=Math.max(0,16-(t-s)),i=window.setTimeout(function(){e(t+o)},o);return s=t+o,i}),a||(a=function(e){clearTimeout(e)})});
!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var t={exports:{}};n(t.exports),e.Impetus=t.exports}}(this,function(e){"use strict";function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var t=.3,i=.04,o=.11,u={BOTH:"both",HORIZONTAL:"horizontal",VERTICAL:"vertical"};e.Directions=u;var r=function e(r){function s(){g.call(A,Q,W)}function d(){O.call(A,Q,W)}function f(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function v(e){var n=f(e);re=null,ne||te||(ne=!0,ie=!1,G=n.id,Z=j=n.x,_=k=n.y,oe=[],y(Z,_),document.addEventListener("touchmove",m),document.addEventListener("touchend",l),document.addEventListener("touchcancel",h),document.addEventListener("mousemove",m),document.addEventListener("mouseup",l))}function m(e){var n=f(e);null===re&&(re=!0,X===u.HORIZONTAL&&(re=Math.abs(Z-n.x)>Math.abs(_-n.y)),X===u.VERTICAL&&(re=Math.abs(Z-n.x)<Math.abs(_-n.y))),re&&ne&&n.id===G&&(e.preventDefault(),j=n.x,k=n.y,y(Z,_),w())}function l(e){var n=f(e);ne&&n.id===G&&h()}function h(){ne=!1,y(Z,_),L(),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",l),document.removeEventListener("touchcancel",h),document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",m)}function y(e,n){for(var t=Date.now();oe.length>0&&!(t-oe[0].time<=100);)oe.shift();oe.push({x:e,y:n,time:t})}function p(){var e=j-Z,n=k-_;if(Q+=e*F,W+=n*F,P){var t=b();0!==t.x&&(Q-=e*x(t.x)*F),0!==t.y&&(W-=n*x(t.y)*F)}else b(!0);s(),Z=j,_=k,ee=!1}function x(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function w(){ee||a(p),ee=!0}function E(e,n){e&&(Y=e[0],z=e[1]),n&&(N=n[0],U=n[1])}function b(e){var n=0,t=0;return void 0!==Y&&Q<Y?n=Y-Q:void 0!==z&&Q>z&&(n=z-Q),void 0!==N&&W<N?t=N-W:void 0!==U&&W>U&&(t=U-W),e&&(0!==n&&(Q=n>0?Y:z),0!==t&&(W=t>0?N:U)),{x:n,y:t,inBounds:0===n&&0===t}}function L(){var e=oe[0],n=oe[oe.length-1],t=n.x-e.x,i=n.y-e.y,o=n.time-e.time,u=o/15/F;J=t/u||0,K=i/u||0;var r=b();Math.abs(J)>1||Math.abs(K)>1||!r.inBounds?(ie=!0,a(M)):d()}function M(){if(ie){J*=C,K*=C,Q+=J,W+=K;var e=b();if(Math.abs(J)>$||Math.abs(K)>$||!e.inBounds){if(P){var n=2.5;if(0!==e.x)if(e.x*J<=0)J+=e.x*i;else{var t=e.x>0?n:-n;J=(e.x+t)*o}if(0!==e.y)if(e.y*K<=0)K+=e.y*i;else{var t=e.y>0?n:-n;K=(e.y+t)*o}}else 0!==e.x&&(Q=e.x>0?Y:z,J=0),0!==e.y&&(W=e.y>0?N:U,K=0);s(),ue=a(M)}else ie=!1,d()}}var T=r.source,A=void 0===T?document:T,g=r.update,I=r.onFinish,O=void 0===I?function(){}:I,B=r.multiplier,F=void 0===B?1:B,R=r.friction,C=void 0===R?.92:R,q=r.initialValues,D=r.boundX,H=r.boundY,V=r.bounce,P=void 0===V||V,S=r.direction,X=void 0===S?u.BOTH:S;n(this,e);var Y,z,N,U,Z,_,j,k,G,J,K,Q=0,W=0,$=t*F,ee=!1,ne=!1,te=!1,ie=!1,oe=[],ue=null,re=null;!function(){if(A="string"==typeof A?document.querySelector(A):A,!A)throw new Error("IMPETUS: source not found.");if(!g)throw new Error("IMPETUS: update function not defined.");q&&(q[0]&&(Q=q[0]),q[1]&&(W=q[1]),s()),E(D,H),A.addEventListener("touchstart",v),A.addEventListener("mousedown",v)}(),this.stop=function(){c(ue)},this.pause=function(){ne=!1,te=!0},this.resume=function(){te=!1},this.setValues=function(e,n){"number"==typeof e&&(Q=e),"number"==typeof n&&(W=n)},this.setBounds=function(e,n){E(e,n)},this.setMultiplier=function(e){F=e,$=t*F}};e.default=r;for(var a=window.requestAnimationFrame,c=window.cancelAnimationFrame,s=["webkit","moz"],d=0,f=0;f<s.length&&!a;++f)a=window[s[f]+"RequestAnimationFrame"],c=window[s[f]+"CancelAnimationFrame"]||window[s[f]+"CancelRequestAnimationFrame"];a||(a=function(e,n){var t=(new Date).getTime(),i=Math.max(0,16-(t-d)),o=window.setTimeout(function(){e(t+i)},i);return d=t+i,o}),c||(c=function(e){clearTimeout(e)})});
!function(e,n){if("function"==typeof define&&define.amd)define(["exports","module"],n);else if("undefined"!=typeof exports&&"undefined"!=typeof module)n(exports,module);else{var t={exports:{}};n(t.exports,t),e.Impetus=t.exports}}(this,function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var o=.3,i=.04,u=.11,r=function e(n){function r(){T.call(M,N,O)}function s(){q.call(M,N,O)}function d(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var n=e.targetTouches[0]||e.changedTouches[0];return{x:n.clientX,y:n.clientY,id:n.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function a(e){var n=d(e);Z||$||(Z=!0,_=!1,H=n.id,z=j=n.x,C=G=n.y,ee=[],l(z,C),document.addEventListener("touchmove",f),document.addEventListener("touchend",v),document.addEventListener("touchcancel",m),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v))}function f(e){e.preventDefault();var n=d(e);Z&&n.id===H&&(j=n.x,G=n.y,l(z,C),y())}function v(e){var n=d(e);Z&&n.id===H&&m()}function m(){Z=!1,l(z,C),E(),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",v),document.removeEventListener("touchcancel",m),document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",f)}function l(e,n){for(var t=Date.now();ee.length>0&&!(t-ee[0].time<=100);)ee.shift();ee.push({x:e,y:n,time:t})}function h(){var e=j-z,n=G-C;if(N+=e*F,O+=n*F,P){var t=w();0!==t.x&&(N-=e*p(t.x)*F),0!==t.y&&(O-=n*p(t.y)*F)}else w(!0);r(),z=j,C=G,W=!1}function p(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function y(){W||c(h),W=!0}function x(e,n){e&&(R=e[0],U=e[1]),n&&(V=n[0],k=n[1])}function w(e){var n=0,t=0;return void 0!==R&&N<R?n=R-N:void 0!==U&&N>U&&(n=U-N),void 0!==V&&O<V?t=V-O:void 0!==k&&O>k&&(t=k-O),e&&(0!==n&&(N=n>0?R:U),0!==t&&(O=t>0?V:k)),{x:n,y:t,inBounds:0===n&&0===t}}function E(){var e=ee[0],n=ee[ee.length-1],t=n.x-e.x,o=n.y-e.y,i=n.time-e.time,u=i/15/F;J=t/u||0,K=o/u||0;var r=w();Math.abs(J)>1||Math.abs(K)>1||!r.inBounds?(_=!0,c(L)):s()}function L(){if(_){J*=I,K*=I,N+=J,O+=K;var e=w();if(Math.abs(J)>Q||Math.abs(K)>Q||!e.inBounds){if(P){var n=2.5;if(0!==e.x)if(e.x*J<=0)J+=e.x*i;else{var t=e.x>0?n:-n;J=(e.x+t)*u}if(0!==e.y)if(e.y*K<=0)K+=e.y*i;else{var t=e.y>0?n:-n;K=(e.y+t)*u}}else 0!==e.x&&(N=e.x>0?R:U,J=0),0!==e.y&&(O=e.y>0?V:k,K=0);r(),c(L)}else _=!1,s()}}var b=n.source,M=void 0===b?document:b,T=n.update,g=n.onFinish,q=void 0===g?function(){}:g,B=n.multiplier,F=void 0===B?1:B,A=n.friction,I=void 0===A?.92:A,S=n.initialValues,X=n.boundX,Y=n.boundY,D=n.bounce,P=void 0===D||D;t(this,e);var R,U,V,k,z,C,j,G,H,J,K,N=0,O=0,Q=o*F,W=!1,Z=!1,$=!1,_=!1,ee=[];!function(){if(M="string"==typeof M?document.querySelector(M):M,!M)throw new Error("IMPETUS: source not found.");if(!T)throw new Error("IMPETUS: update function not defined.");S&&(S[0]&&(N=S[0]),S[1]&&(O=S[1]),r()),x(X,Y),M.addEventListener("touchstart",a),M.addEventListener("mousedown",a)}(),this.pause=function(){Z=!1,$=!0},this.resume=function(){$=!1},this.setValues=function(e,n){"number"==typeof e&&(N=e),"number"==typeof n&&(O=n)},this.setBounds=function(e,n){x(e,n)},this.setMultiplier=function(e){F=e,Q=o*F}};n.exports=r;var c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}()});